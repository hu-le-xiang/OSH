# 第一次例会汇报

- 胡乐翔
- 2021.3.26

## 个人能力介绍

c/c++  
rust（学习中）  
linux（学习中）  
python（不深）   
markdown（学习中）   
github（学习中）  
树莓派（学习中）  

## 调研内容

### 可选方向
用VFS写图文件系统,实现文件智能化搜索



### 文件系统

文件是操作系统对存储设备的物理属性加以抽象，从而定义的逻辑存储单位。  
常用的文件类型包括：  
1.可执行文件（可运行的机器语言程序）  
2.目标文件（已编译的、尚未链接的机器语言）  
3.源代码文件（各种语言的源代码）  
4.批处理文件（命令解释程序的指令）  
5.标记文件（文本数据、文档）  
6.文字处理文件（各种文字处理程序的格式）  
7.库文件（为程序员提供的程序库）  
8.打印或可视文件（打印或图像格式的ASCII或二进制文件）  
9.档案文件（相关文件组成的一个文件，用于归档或存储）  
10.多媒体文件（包含音频或A/V信息的二进制文件）。  

操作系统可以提供系统调用，来创建、写入、读取、重新定位、删除及截断文件。每个打开文件都具有一系列的关联信息，包括文件指针、文件打开计数、文件的磁盘位置以及访问权限。有的文件系统提供用于锁定打开文件的功能。其中，文件锁类似于读者-写者锁，允许一个进程锁定；共享锁类似于读者锁，以便多个进程可以并发获取它；独占锁类似于写作锁，一次只有一个进程可以获取这样的锁。  

文件访问方法：  
1.顺序访问：文件信息按顺序加以处理；  
2.直接访问/相对访问：文件由固定长度的逻辑记录组成，以允许程序按任意顺序进行快速读取和写入记录；  
3.创建文件索引：为了在文件中查找记录，首先搜索索引，然后根据指针直接访问文件并且找到所需记录。

文件存储在随机存取存储设备上，包括硬盘、光盘和固态盘。硬盘的每个分区都可用于创建文件系统，包含文件系统的分区通常称为卷。卷可以是设备的一部分，或整个设备，或由多个设备组成的RAID集。每个卷可以作为虚拟磁盘。卷还可以存储多个操作系统，以允许引导和运行多个操作系统。包含文件系统的每个卷也应包含有关系统内的文件信息。这些信息保存在设备目录或卷目录表中。

目录可视为符号表，可将文件名称转成目录条目。可对文件目录执行的操作包括搜索文件、创建文件、删除文件、遍历目录、重命名文件以及遍历文件系统。

常见的目录逻辑结构：  
1.单机目录：所有文件都包含在同一目录中；  
2.两级目录：每个用户都有自己的用户文件目录（UFD），这些UFD具有类似的结构，但是只列出了单个用户的文件。当用户作业开始或用户登录时，搜索系统的主文件目录（MFD)。通过用户名或账户可索引MFD，每个条目指向该用户的UFD。  
3.树形目录：将两级目录结构扩展到任意高度的树，这种推广允许用户创建自己的子目录并相应地组织文件。路径名可有两种形式：绝对路径名从根开始，遵循一个路径到指定文件，并给出路径上的目录名；相对路径名从当前目录开始，定义一个路径。  
4.无环图目录：允许目录共享子目录和文件，同一文件或子目录可出现在两个不同目录中。  
5.通用图目录：垃圾收集方案——确定何时最后引用已被删除并重新分配磁盘空间，涉及遍历整个文件系统，并标记所有可访问的。

### 虚拟文件系统(VFS)

虚拟文件系统是一个内核软件层，在具体的文件系统之上抽象的一层，用来处理与Posix文件系统相关的所有调用，表现为能够给各种文件系统提供一个通用的接口，使上层的应用程序能够使用通用的接口访问不同文件系统，同时也为不同文件系统的通信提供了媒介。它包括两个组件：一组定义，以指定文件系统对象看起来像什么；一层软件，以操作这些对象。

linux虚拟文件系统的主要对象类型：
1. inode对象：单个文件  
inode和文件的对象是用于访问文件的机制。inode对象是包含磁盘块指针的数据结构，这些磁盘块包括实际的文件内容；文件对象表示打开文件数据的访问位置。进程在没有首先获得指向inode的文件对象时，不能访问inode的内容。   
2. 文件对象：打开的文件  
一个打开文件的每个实例都有一个文件对象，但总是只有一个inode对象。即使文件不再由任何进程使用，它的inode对象可能仍由VFS缓存以提高性能。所有缓存的文件数据链接到文件inode对象的一个列表。这个inode还保留了每个标准文件信息。
3. 超级块对象：整个文件系统  
操作系统内核为按文件系统安装的每个磁盘设备或当前连接的每个网络文件系统，维护单个超级块对象。超级块对象的主要作用是提供inode访问。VFS通过唯一的文件系统/inode号对，来确定每个inode。它通过询问超级块对象，找到对用于特定inode号的inode，以便返回具有这个号码的inode。
4. dentry对象：单个目录条目  
可能包括文件路径名中的目录和实际文件的名称。

---

（以下内容节选自2020学长OSH大作业结题报告）
### DBFS简介

DBFS是一种新类型文件系统，最早由Onne Gorter在他的硕士论文中开发，现在是一个sf.net项目。事实上，与其称DBFS为文件系统，不如称它为文档系统。它的设计焦点集中于用户，目标是，使得用户的文件管理更加轻松。它将查找文件的责任放在了计算机上，而用户不必记忆文件储存的位置。然后DBFS实际上并不存储文件，而是在基于基础层次结构的文件系统上保存对文件的引用。 GUI部分在KDE中实现，在其中替换了所有基于层次结构的文件访问。这给人的印象是没有层次结构，但是对于应用程序而言，什么都没有改变，打开文件和保存文件对话框具有相同的API。

### Neo4j简介

Neo4j是一个高性能的NOSQL图形数据库，它将结构化数据存储在图上而不是表中。它是一个嵌入式的、基于磁盘的、具备完全的事务特性的Java持久化高性能引擎，该引擎具有成熟数据库的所有特性。我们计划使用neo4j完成图数据库的搭建。
